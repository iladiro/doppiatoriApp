<div class="container">
  <alertMessage [message]="alert_message" *ngIf="alert_message"></alertMessage>
  <div class="general-card card mb-4">
    <div class="general-card__body">
      <form id="dubberForm" name="form" (ngSubmit)="f.form.valid && create()" #f="ngForm" novalidate class="form--light">
        <fieldset class="pl-0 pr-0">
          <legend>Informazioni personali:</legend>
          <div class="form-row">
            <div class="col-sm-5 mb-3">
              <label for="name">Nome*</label>
              <input type="text" id="name" class="form-control black black text-capitalize" placeholder="Nome" [(ngModel)]="dubber.name" name="name" #name="ngModel" required>
              <div *ngIf="f.submitted && !name.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-5 mb-3">
              <label for="surname">Cognome*</label>
              <input type="text" id="surname" class="form-control black black text-capitalize" placeholder="Cognome" [(ngModel)]="dubber.surname" name="surname" #surname="ngModel" required>
              <div *ngIf="f.submitted && !surname.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-2 mb-3">
              <label for="gender">Sesso</label>
              <select class="form-control black black" name="gender" [(ngModel)]="dubber.gender" #gender="ngModel" >
                <option value="F">Femmina</option>
                <option value="M">Maschio</option>
              </select>
            </div>
            <div class="col-sm-6 mb-3">
              <label for="fiscal_code">Codice fiscale*</label>
              <input type="text" id="fiscal_code" class="form-control black black text-uppercase" placeholder="Codice fiscale" [(ngModel)]="dubber.fiscal_code" name="fiscal_code" #fiscal_code="ngModel" pattern="^[a-zA-Z]{6}[0-9]{2}[a-zA-Z][0-9]{2}[a-zA-Z][0-9]{3}[a-zA-Z]$" required>
              <div *ngIf="f.submitted && !fiscal_code.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-6 mb-3">
              <label for="nationality">Nazionalità</label>
              <select id="nationality" class="form-control black black text-capitalize" [(ngModel)]="dubber.nationality" name="nationality" #nationality="ngModel">
                <option [value]="null" selected disabled>Seleziona categoria</option>
                <option *ngFor="let nationality of nationalities" [value]="nationality.nationality">
                  {{nationality.nationality}}
                </option>
              </select>
            </div>
            <div class="col-sm-4 mb-3">
              <label for="birth_date">Data di nascita</label>
              <input type="date" id="birth_date" class="form-control black black" placeholder="DD/MM/YYYY" [(ngModel)]="dubber.birth_date" name="birth_date" #birth_date="ngModel" >
              <div *ngIf="f.submitted && !birth_date.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-4 mb-3">
              <label for="birth_place">Luogo di nascita*</label>
              <input type="text" id="birth_place" class="form-control black black text-capitalize" placeholder="Città" [(ngModel)]="dubber.birth_place" name="birth_place" #birth_place="ngModel" required>
              <div *ngIf="f.submitted && !birth_place.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-4 mb-3">
              <label for="birth_province">Provincia di nascita</label>
              <input type="text" id="birth_province" class="form-control black black text-capitalize" placeholder="Provincia" [(ngModel)]="dubber.birth_province" name="birth_province" #birth_province="ngModel"  maxlength="2">
              <div *ngIf="f.submitted && !birth_province.valid" class="is-invalid">Campo errato</div>
            </div>
          </div>
        </fieldset>
        <fieldset class="pl-0 pr-0 mt-30">
          <legend>Informazioni fiscali:</legend>
          <h5>Residenza</h5>
          <div class="form-row">
            <div class="col-md-4 mb-3">
              <div class="form-group">
                <label for="residence_city">Città</label>
                <input id="residence_city" type="text" class="form-control black black" placeholder="Città" [(ngModel)]="address.residence_city" name="residence_city" #residence_city="ngModel" >
                <div *ngIf="f.submitted && !residence_city.valid" class="is-invalid">Campo errato</div>
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <div class="form-group">
                <label for="residence_address">Indirizzo</label>
                <input id="residence_address" type="text" class="form-control black black" placeholder="Indirizzo" [(ngModel)]="address.residence_address" name="residence_address" #residence_address="ngModel">
                <div *ngIf="f.submitted && !residence_address.valid" class="is-invalid">Campo errato</div>
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <div class="form-group">
                <label for="residence_postcode">Cap</label>
                <input id="residence_postcode" type="text" class="form-control black black" placeholder="Cap" [(ngModel)]="address.residence_postcode" name="residence_postcode" #residence_postcode="ngModel">
                <div *ngIf="f.submitted && !residence_postcode.valid" class="is-invalid">Campo errato</div>
              </div>
            </div>
          </div>
          <div>
            <p>Il tuo domicilio coincide con la tua residenza? </p>
            <div class="form-check form-check-inline">
              <input type="radio" class="form-check-input" name="check_domicilio" value="yes" (change)="onSelectionChange('yes')">
              <label class="form-check-label" for="same_domicilio">SI</label>
            </div>
            <div class="form-check form-check-inline">
              <input type="radio" class="form-check-input" name="check_domicilio" value="no" (change)="onSelectionChange('no')">
              <label class="form-check-label" for="different_domicilio">NO</label>
            </div>
          </div>
          <div *ngIf="check_domicilio == 'no'" class="mt-15">
            <h5 class="mb-3">Domicilio</h5>
            <div class="form-row">
              <div class="col-sm-12 col-md-4 mb-3">
                <label for="home_city">Città</label>
                <input id="home_city" type="text" class="form-control black black text-capitalize" placeholder="Città" [(ngModel)]="address.home_city" name="home_city" #home_city="ngModel" >
                <div *ngIf="f.submitted && !home_city.valid" class="is-invalid">Campo errato</div>
              </div>
              <div class="col-sm-12 col-md-4 mb-3">
                <label for="home_address">Indirizzo</label>
                <input id="home_address" type="text" class="form-control black black text-capitalize" placeholder="Indirizzo" [(ngModel)]="address.home_address" name="home_address" #home_address="ngModel" >
                <div *ngIf="f.submitted && !home_address.valid" class="is-invalid">Campo errato</div>
              </div>
              <div class="col-sm-12 col-md-4 mb-3">
                <label for="home_postcode">Cap</label>
                <input id="home_postcode" type="text" class="form-control black black text-capitalize" placeholder="Cap" [(ngModel)]="address.home_postcode" name="home_postcode" #home_postcode="ngModel" >
                <div *ngIf="f.submitted && !home_postcode.valid" class="is-invalid">Campo errato</div>
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset class="pl-0 pr-0 mt-30">
          <legend>Categoria Enpals:</legend>
          <div class="form-row">
            <div class="col-sm-12 col-md-4 mb-3">
              <label for="matricola_enpals">Matricola enpals</label>
              <input id="matricola_enpals" type="text" class="form-control black black text-capitalize" placeholder="Matricola" [(ngModel)]="enpals_categories.matricola_enpals" name="matricola_enpals" #matricola_enpals="ngModel" >
              <div *ngIf="f.submitted && !matricola_enpals.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-12 col-md-4 mb-3">
              <label for="qualification">Qualifica</label>
              <select id="qualification" class="form-control black black text-capitalize" [(ngModel)]="dubber.qualification" name="qualification" #qualification="ngModel">
                <option [value]="null" selected disabled>Seleziona categoria</option>
                <option *ngFor="let qualification of qualifications" [value]="qualification.code">
                  {{qualification.description}}
                </option>
              </select>
            </div>
            <div class="col-sm-12 col-md-4 mb-3">
              <label>Cat. contrib.</label>
              <div class="form-group">
                <select id="cat_contrib" class="form-control black black text-capitalize" [(ngModel)]="enpals_categories.cat_contrib" name="cat_contrib" #cat_contrib="ngModel">
                  <option [value]="null" selected disabled>Seleziona categoria</option>
                  <option value="A">Ante '95</option>
                  <option value="B">Dopo '95</option>
                  <option value="C">Dopo '95 (a.c.p.)</option>
                </select>
              </div>
            </div>
            <div class="col-sm-12 col-md-6">
              <div class="form-group">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="pensionato" value="pensionato" [(ngModel)]="enpals_categories.pensionato" name="pensionato">
                  <label class="form-check-label" for="pensionato">Pensionato</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="iscrizione_sindacato" value="iscrizione_sindacato" [(ngModel)]="enpals_categories.iscrizione_sindacato" name="iscrizione_sindacato">
                  <label class="form-check-label" for="iscrizione_sindacato">Iscr. sindacato</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="ritenuta_acconto" value="ritenuta_acconto" [(ngModel)]="enpals_categories.ritenuta_acconto" name="ritenuta_acconto">
                  <label class="form-check-label" for="ritenuta_acconto">Rit. acconto</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="trattenuta_sindacale" value="trattenuta_sindacale" [(ngModel)]="enpals_categories.trattenuta_sindacale" name="trattenuta_sindacale">
                  <label class="form-check-label" for="trattenuta_sindacale">Tratt. sindacale</label>
                </div>
              </div>
            </div>
            <div class="col-sm-12 col-md-6">
              <div class="form-group">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="forfettone" id="forfettone_0" value="0" [(ngModel)]="enpals_categories.forfettone">
                  <label class="form-check-label" for="forfettone_0">Regime Normale</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="forfettone" id="forfettone_1" value="1" [(ngModel)]="enpals_categories.forfettone">
                  <label class="form-check-label" for="forfettone_1">Regime Minimo</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="forfettone" id="forfettone_2" value="2" [(ngModel)]="enpals_categories.forfettone">
                  <label class="form-check-label" for="forfettone_2">Regime Forfettario</label>
                </div>
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset class="pl-0 pr-0 mt-30">
          <legend>Partita Iva:</legend>
          <div class="form-group">
            <input id="vat" type="text" class="form-control black black text-capitalize" placeholder="Codice" [(ngModel)]="dubber.vat" name="vat" #vat="ngModel">
            <div *ngIf="f.submitted && !vat.valid" class="is-invalid">Campo errato</div>
          </div>
        </fieldset>
        <fieldset class="pl-0 pr-0 mt-30">
          <legend>Dati Bancari:</legend>
          <div class="form-row">
            <div class="col-sm-12 col-md-6 mb-3">
              <label for="bank_name">Nome Banca</label>
              <input id="bank_name" type="text" class="form-control black black text-capitalize" placeholder="Nome Banca" [(ngModel)]="bank.bank_name" name="bank_name" #bank_name="ngModel" >
              <div *ngIf="f.submitted && !bank_name.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-12 col-md-6 mb-3">
              <label for="bank_agency">Agenzia</label>
              <input id="bank_agency" type="text" class="form-control black black text-capitalize" placeholder="Agenzia" [(ngModel)]="bank.bank_agency" name="bank_agency" #bank_agency="ngModel" >
              <div *ngIf="f.submitted && !bank_agency.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-12 col-md-4 mb-3">
              <label for="bank_account">Conto Corrente</label>
              <input id="bank_account" type="text" class="form-control black black text-capitalize" placeholder="C/C" [(ngModel)]="bank.bank_account" name="bank_account" #bank_account="ngModel" >
              <div *ngIf="f.submitted && !bank_account.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-12 col-md-4 mb-3">
              <label for="abi">ABI</label>
              <input id="abi" type="text" class="form-control black black text-capitalize" placeholder="ABI" [(ngModel)]="bank.abi" name="abi" #abi="ngModel" >
              <div *ngIf="f.submitted && !abi.valid" class="is-invalid">Campo errato</div>
            </div>
            <div class="col-sm-12 col-md-4 mb-3">
              <label for="cab">CAB</label>
              <input id="cab" type="text" class="form-control black black text-capitalize" placeholder="CAB" [(ngModel)]="bank.cab" name="cab" #cab="ngModel" >
              <div *ngIf="f.submitted && !cab.valid" class="is-invalid">Campo errato</div>
            </div>
          </div>
        </fieldset>
        <fieldset class="pl-0 pr-0 mt-30">
          <legend>Contatti:</legend>
          <div class="form-row">
            <div class="col-sm-4 mb-3">
              <div class="form-group">
                <label>Email</label>
                <input id="email" type="email" class="form-control black black" placeholder="Email" [(ngModel)]="dubber.email" name="email" #email="ngModel" pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$">
                <div *ngIf="f.submitted && !email.valid" class="is-invalid">Campo errato</div>
              </div>
            </div>
            <div class="col-sm-4 mb-3">
              <div class="form-group">
                <label>Telefono</label>
                <input id="phone" type="phone" class="form-control black black" placeholder="Telefono" [(ngModel)]="dubber.phone" name="phone" #phone="ngModel"  pattern="[0-9]+">
                <div *ngIf="f.submitted && !phone.valid" class="is-invalid">Campo errato</div>
              </div>
            </div>
            <div class="col-sm-4 mb-3">
              <div class="form-group">
                <label for="mobile_phone">Cellulare</label>
                <input type="phone" id="mobile_phone" class="form-control black black" placeholder="Cellulare" [(ngModel)]="dubber.mobile_phone" name="mobile_phone"  #mobile_phone="ngModel" pattern="[0-9]+" maxlength="10">
                <div *ngIf="f.submitted && !mobile_phone.valid" class="is-invalid">Campo errato</div>
              </div>
            </div>
          </div>
        </fieldset>
        <div class="row mt-30 mb-20">
          <div class="col">
            <back-button></back-button>
          </div>
          <div class="col text-right">
            <button type="submit" class="btn btn-outline-success">Crea</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
